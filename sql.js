var sCamposDb="";function Ar5(C,N){var s="";if(C.length>0&&N>0){for(var i=1;i<=N;i++){s+=C;}}return s;}function Ar49(N){var V="";if(N.length>=1){switch(N.length){case 1:V=N.toUpperCase();break;default:V=N.charAt(0).toUpperCase().concat(N.substr(1).toLowerCase());break;}}return V;}function Ar9(T,A){var B=false;if((T.length>0&&A.length>0)&&T.length>=A.length){if(T.substr(0,A.length)==A){B=true;}}return B;}function Ar460(I){if(document.getElementById(I)!==null && document.getElementById(I).value.length>0){document.getElementById(I).select();document.execCommand("copy");}}function TblPhp1(T,I,aNomCam,sql){ var s="  &lt;?php\n"; s+="  $row_"+T+"_1= ObtenerDatos($dbHost,$dbUsrSel,$dbPwdSel,$dbBaseDatos,\""+sql+"\");\n";  s+="  if(count($row_"+T+"_1) > 0){ ?&gt;\n     <div align=\"center\">\n      <table border=\"1\">\n";  for(var i=0;i<aNomCam.length;i++){ s+="       <tr><td>"+aNomCam[i]+" :</td><td>&lt;?php echo $row_"+T+"_1[0][\""+aNomCam[i]+"\"]?&gt;</td></tr>\n"; }  s+="      </table>\n     </div>\n     &lt;?php } else { ?&gt;\n     <h1>No Hay datos</h1>\n  &lt;?php } ?&gt;\n";  document.getElementById(I).value=s; }function sql1(i,t,c){var NC=document.getElementById(c).innerHTML,pNC=Ar49(NC);document.getElementById(i).value+= t+"."+NC+ ", ";sCamposDb+=NC+",";}function tabla(t,i,p,m,zz){if(document.getElementById(i).value.length>0){if(!Ar9(document.getElementById(i).value,"SELECT ")){var sTblPhp="",sql="SELECT "+document.getElementById(i).value.substring(0,document.getElementById(i).value.length -2)+" FROM "+t;var aNomCam=sCamposDb.substr(0,sCamposDb.length -1).split(",");TblPhp1(t,("TbPhp"+zz),aNomCam,sql);SelHtmPhp(t,aNomCam,("CboPhp"+zz),sql);var sPhpPdf=ClsPdfPhp("Chicago Bulls");var rt="";for(var p1=0;p1<aNomCam.length;p1++){sPhpPdf+="$sNomCampo"+(p1+1)+" = \""+aNomCam[p1]+"\";\n"; rt+="$sNomCampo"+(p1+1)+",";}sPhpPdf+="$MargenTbl=5;\n";var sAlgNoCa=Ar5("\"C\",",aNomCam.length);var sAlgDat=Ar5("\"L\",",aNomCam.length);var sAnCol=Ar5("40,",aNomCam.length);sPhpPdf+="$aAlignNomCampos = array("+sAlgNoCa.substr(0,sAlgNoCa.length -1)+");\n";sPhpPdf+="$aAlignRegistros = array("+sAlgDat.substr(0,sAlgDat.length -1)+");\n";sPhpPdf+="$aAnchoCols = array("+sAnCol.substr(0,sAnCol.length -1)+");\n";sPhpPdf+=pdfPhp1(sql,t,rt);for(var p1=0;p1<aNomCam.length;p1++){sPhpPdf+="                        utf8_decode($row_"+t+"[\""+aNomCam[p1]+"\"])"+( p1< (aNomCam.length -1) ? ",":"" )+"\n";}sPhpPdf+=pdfPhp2(t,rt);document.getElementById(("PdfTPhp"+zz)).value=sPhpPdf;document.getElementById(i).value=sql;switch(m){case 1:{sTblPhp=SelPhpMy1(t,sql);}break;case 2:{sTblPhp=SelPhpPos1(t,sql);}break;}for(var x=0;x<aNomCam.length;x++){sTblPhp+="     <th>"+aNomCam[x].replace("_"," ")+"</th>\n";}switch(m){case 1:{sTblPhp+=SelPhpMy2(t);}break;case 2:{sTblPhp+=SelPhpPos2(t)}break;}for(var x=0;x<aNomCam.length;x++){sTblPhp+="        <td>&lt;?php echo $row_"+t+"[\""+aNomCam[x]+"\"];?&gt;</td>\n";}switch(m){case 1:{sTblPhp+=SelPhpMy3(t);}break;case 2:{sTblPhp+=SelPhpPos3(t);}break;}document.getElementById(p).value=sTblPhp;sCamposDb="";Ar460(i);document.getElementById(p).select();document.execCommand("copy");}} else {alert("Selecciona los Campos para la Consulta");}}function Lim(){sCamposDb="";for(var i=1;i<=255;i++){if(document.getElementById(("tX"+i))!==null){document.getElementById(("tX"+i)).value="";document.getElementById(("SelPhp"+i)).value="";document.getElementById(("CboPhp"+i)).value="";document.getElementById(("TbPhp"+i)).value="";document.getElementById(("PdfTPhp"+i)).value="";}}}function SelPhpPos1(Tbl,Sql){return "if($result_"+Tbl+" = pg_query($dbConnection,\""+Sql+"\")){\n  if(pg_num_rows($result_"+Tbl+")>0){ ?&gt;\n   <table>\n    <tr class=\"thLbl\">\n";}function SelPhpPos2(Tbl){return "    </tr>\n    &lt;?php\n     $iRen=1;\n     while($row_"+Tbl+" = pg_fetch_assoc($result_"+Tbl+")){ ?&gt;\n       <tr class=\"&lt;?php echo ($iRen % 2 == 0 ? \"trP\" : \"trI\");?&gt;\">\n";}function SelPhpPos3(Tbl){return "      </tr>\n      &lt;?php\n      $iRen++;\n     } ?&gt;\n   </table>\n     &lt;?php } else { ?&gt;\n     <h1>No Hay datos</h1>\n     &lt;?php\n   }\n   pg_free_result($result_"+Tbl+");\n}\npg_close($dbConnection);\n";}function SelPhpMy1(Tbl,Sql){return "if($result_"+Tbl+" = $mysqli->query(\""+Sql+"\")){\n  if($result_"+Tbl+"->num_rows > 0){ ?&gt;\n   <table>\n    <tr class=\"thLbl\">\n";}function SelPhpMy2(Tbl){return "    </tr>\n    &lt;?php\n     $iRen=1;\n     while( $row_"+Tbl+" = $result_"+Tbl+"->fetch_assoc() ) { ?&gt;\n       <tr class=\"&lt;?php echo ($iRen % 2 == 0 ? \"trP\" : \"trI\"); ?&gt;\">\n";}function SelPhpMy3(Tbl){return "       </tr>\n      &lt;?php\n      $iRen++;\n     } ?&gt;\n    </table>\n   &lt;?php } else { ?&gt;\n     <h1>No Hay datos</h1>\n   &lt;?php }\n   $result_"+Tbl+"->close();\n}\n$mysqli->close();\n";}function SelHtmPhp(t,A,X,S){var s='',o='';if(A.length>1){for(var i=1;i<A.length;i++){o+='$reg["'+A[i]+'"]." ".';}s+='<select>\n<option value="0"></option>\n&lt;?php\n';s+='$aDatos_'+t+' = ObtenerDatos($dbHost,$dbUsrSel,$dbPwdSel,$dbBaseDatos,\"'+S+'\");\n';s+='if(count($aDatos_'+t+')>0){\n';s+='  foreach($aDatos_'+t+' as $reg):\n'; if(A.length == 2){ s+='    echo "<option value=\\\"".$reg["'+A[0]+'"]."\\\">".$reg["'+A[1]+'"]."</option>";\n'; } else { s+='    echo "<option value=\\\"".$reg["'+A[0]+'"]."\\\">".'+o.substr(0,o.length -5)+'."</option>";\n';}s+='  endforeach;\n';s+='}\n?&gt;\n</select>\n';document.getElementById(X).value+=s;}}function ClsPdfPhp(T){ var s="&lt;?php\nerror_reporting(0);\ninclude(\"../../phplibs/fpdf17/fpdf.php\");\n\nclass PDF extends FPDF {\n\n    var $widths; var $aligns;\n"; s+="    function Header(){\n        $this->SetAuthor(\"Armando Ramos M.\");\n        $this->SetSubject(\""+T+"\");\n        $this->SetTitle(\""+T+"\");\n        $this->SetKeywords(\""+T+"\");\n        $this->SetTextColor(0,0,0);\n        $this->SetFont('Arial','',14);\n        //$this->Cell(150, 3 , \""+T+"\",0,1,'C');\n        $this->Cell(277, 5 , \""+T+"\",0,1,'C');\n        $this->Ln();\n    }\n"; s+="    function EstablecerAncho($w){$this->widths=$w;}\n    function EstablecerAlineacion($a){$this->aligns=$a;}\n"; s+="    function EtiquetaCampos($data){\n        $nb=0;\n        for($i=0;$i<count($data);$i++){$nb=max($nb,$this->NbLines($this->widths[$i],$data[$i]));}\n        $h=10*$nb;\n        $this->CheckPageBreak($h);\n        for($i=0;$i<count($data);$i++){\n            $w=$this->widths[$i];\n            $a=isset($this->aligns[$i]) ? $this->aligns[$i] : 'L';\n            $x=$this->GetX();\n            $y=$this->GetY();\n            $this->SetTextColor(0,0,0);\n            $this->SetFillColor(220,220,220);\n            $this->MultiCell($w,10,$data[$i],1,$a,TRUE);\n            $this->SetXY($x+$w ,$y);\n        }\n        $this->SetTextColor(0,0,0);\n        $this->Ln($h);\n    }\n"; s+="    function RenglonAlternado($data, $SepDatos){\n        $nb=0;\n        for($i=0;$i<count($data);$i++){ $nb=max($nb,$this->NbLines($this->widths[$i],$data[$i])); }\n        $h=$SepDatos*$nb;\n        $this->CheckPageBreak($h);\n        for($i=0;$i<count($data);$i++){\n            $w=$this->widths[$i];\n            $a=isset($this->aligns[$i]) ? $this->aligns[$i] : 'L';\n            $x=$this->GetX();\n            $y=$this->GetY();\n\n            if($this->colorFondoCelda % 2 == 0){\n                $this->SetFillColor(245,245,245);\n                $this->SetTextColor(0,0,0);\n            } else {\n                $this->SetFillColor(211,211,211);\n                $this->SetTextColor(0,0,0);\n            }\n\n            $this->Rect($x,$y,$w,$h,'F');\n            $this->MultiCell($w,$SepDatos,$data[$i],0,$a);\n            $this->SetXY($x+$w,$y);\n        }\n        $this->SetTextColor(0,0,0);\n        $this->Ln($h);\n    }\n"; s+="    function CheckPageBreak($h){if($this->GetY()+$h>$this->PageBreakTrigger) $this->AddPage($this->CurOrientation); }\n"; s+="    function NbLines($w,$txt){\n        $cw=&$this->CurrentFont['cw'];\n        if($w==0) $w=$this->w-$this->rMargin-$this->x;\n        $wmax=($w-2*$this->cMargin)*1000/$this->FontSize;\n        $s=str_replace(\"\\r\",'',$txt);\n        $nb=strlen($s);\n        if($nb>0 and $s[$nb-1]==\"\\n\") $nb--;\n        $sep=-1; $i=0; $j=0; $l=0; $nl=1;\n        while($i<$nb){\n            $c=$s[$i];\n            if($c==\"\\n\"){ $i++; $sep=-1; $j=$i; $l=0; $nl++; continue; }\n            if($c==' ') $sep=$i;\n            $l+=$cw[$c];\n            if($l>$wmax){if($sep==-1){ if($i==$j) $i++;} else $i=$sep+1; $sep=-1; $j=$i; $l=0; $nl++; }\n            else $i++;\n        }\n      return $nl;\n    }\n"; s+="    function Footer(){\n        $this->AliasNbPages();\n        //$this->SetXY(180, 340);\n        $this->SetXY(300, 200);\n        $this->SetTextColor(0,0,0);\n        $this->Cell(20,5, (\"Pagina: \". $this->PageNo().'/{nb}'  ),0,0,'L');\n    }\n}\n\n"; s+="$sMensajeNoDatos = \"No Hay Datos\";\n"; s+="$iTamanioTitulos = 14;\n"; s+="$iTamanioTitulosCampos = 12;\n"; s+="$iTamanioDatos = 10;\n"; s+="$SepDatos = 8;\n"; s+="$Horientacion = 1;\n"; s+="switch($Horientacion){\n"; s+=" case 1:{\n"; s+="   $iPosY_IniTbl = 25;\n"; s+="   $iPosY_FinTbl = 195;\n"; s+="   $sHorientacion=\"L\";\n"; s+=" }break;\n"; s+=" case 2:{\n"; s+="  $iPosY_IniTbl = 15;\n"; s+="  $iPosY_FinTbl = 335;\n"; s+="  $sHorientacion=\"P\";\n"; s+=" }break;\n"; s+="}\n\n"; return s;}function pdfPhp1(sql,t,rt){ s="$pdf=new PDF($sHorientacion,'mm','Legal');\n\n"; s+="$pdf->AddPage();\n"; s+="$pdf->SetFont('Arial','',8);\n"; s+="$pdf->SetTextColor(0,0,0);\n\n"; s+="    $mysqli = new mysqli(\"localhost\", \"root\", \"\", \"armando\");\n"; s+="    if($result_"+t+" = $mysqli->query(\""+sql+"\")){\n\n"; s+="      if($result_"+t+"->num_rows > 0){\n\n"; s+="        $pdf->SetY($iPosY_IniTbl);\n"; s+="        $pdf->SetX($MargenTbl);\n"; s+="        $pdf->EstablecerAncho($aAnchoCols);\n"; s+="        $pdf->SetFont('Arial','',$iTamanioTitulosCampos);\n"; s+="        $pdf->SetTextColor(0,0,0);\n"; s+="        $pdf->EstablecerAlineacion($aAlignNomCampos);\n\n"; s+="        $pdf->EtiquetaCampos(array("+rt.substr(0,rt.length -1)+"));\n"; s+="        $pdf->colorFondoCelda = 1;\n"; s+="        while( $row_"+t+" = $result_"+t+"->fetch_assoc() ) {\n"; s+="            $pdf->SetFont('Arial','',$iTamanioDatos);\n"; s+="            $pdf->EstablecerAlineacion($aAlignRegistros);\n"; s+="            $pdf->SetX($MargenTbl);\n"; s+="            $pdf->RenglonAlternado(\n"; s+="                    array(\n";return s; }function pdfPhp2(t,rt){ s="                    ), $SepDatos);\n"; s+="            if($pdf->GetY() + $SepDatos > $iPosY_FinTbl){\n"; s+="                $pdf->AddPage();\n"; s+="                $pdf->SetTextColor(0,0,0);\n"; s+="                $pdf->SetFont('Arial','',$iTamanioTitulosCampos);\n"; s+="                $pdf->SetY($iPosY_IniTbl);\n"; s+="                $pdf->SetX($MargenTbl);\n"; s+="                $pdf->EstablecerAlineacion($aAlignNomCampos);\n"; s+="                $pdf->EtiquetaCampos(array("+rt.substr(0,rt.length -1)+"));\n"; s+="            }\n"; s+="            $pdf->colorFondoCelda++;\n"; s+="        }\n"; s+="        $result_"+t+"->close();\n"; s+="        $mysqli->close();\n"; s+="      } else {\n"; s+="                $pdf->SetTextColor(0,0,0);\n"; s+="                $pdf->SetFont('Arial','',$iTamanioTitulosCampos);\n"; s+="                $pdf->Text(50, 50, $sMensajeNoDatos);\n"; s+="      }\n"; s+="    }\n"; s+="    $pdf->SetTextColor(0,0,0);\n"; s+="$pdf->Output();\n"; s+="?>\n";return s;}